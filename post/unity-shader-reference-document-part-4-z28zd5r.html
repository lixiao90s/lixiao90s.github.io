<!doctype html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Unity Shader 参考文档 - 第四部分" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="记录学习 工作。" /><meta property="og:description" content="记录学习 工作。" /><link rel="canonical" href="https://lixiao90s.github.io/post/unity-shader-reference-document-part-4-z28zd5r.html" /><meta property="og:url" content="https://lixiao90s.github.io/post/unity-shader-reference-document-part-4-z28zd5r.html" /><meta property="og:site_name" content="晓的博客" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-31T09:07:01+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Unity Shader 参考文档 - 第四部分" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-07-31T09:07:01+08:00","datePublished":"2025-07-31T09:07:01+08:00","description":"记录学习 工作。","headline":"Unity Shader 参考文档 - 第四部分","mainEntityOfPage":{"@type":"WebPage","@id":"https://lixiao90s.github.io/post/unity-shader-reference-document-part-4-z28zd5r.html"},"url":"https://lixiao90s.github.io/post/unity-shader-reference-document-part-4-z28zd5r.html"}</script><title>Unity Shader 参考文档 - 第四部分 | 晓的博客</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="晓的博客"><meta name="application-name" content="晓的博客"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/zh.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/sample/favicon.ico" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">晓的博客</a><p class="site-subtitle fst-italic mb-0">学习&工作记录</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>关于</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/lixiao90s" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['example','domain.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">首页</a> </span> <span>Unity Shader 参考文档 - 第四部分</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> 文章</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">取消</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Unity Shader 参考文档 - 第四部分</h1><div class="post-meta text-muted"> <span> 发表于 <time data-ts="1753924021" data-df="YYYY/MM/DD" data-bs-toggle="tooltip" data-bs-placement="bottom" > 2025/07/31 </time> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href="https://github.com/lixiao90s">晓</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3547 字" > <em>19 分钟</em>阅读</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Unity Shader 参考文档 - 第四部分</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">文章内容</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Unity Shader 参考文档 - 第四部分</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><hr /><h2 id="pipeline渲染管线"><span class="me-2">Pipeline（渲染管线）</span><a href="#pipeline渲染管线" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="应用程序阶段application-stage"><span class="me-2">应用程序阶段（Application Stage）</span><a href="#应用程序阶段application-stage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>阶段<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">0.Application Stage</code>​<td>此阶段一般由CPU将需要在屏幕上绘制的几何体、摄像机位置、光照纹理等输出到管线的几何阶段</table></div><h3 id="几何阶段geometry-stage"><span class="me-2">几何阶段（Geometry Stage）</span><a href="#几何阶段geometry-stage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>阶段<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">1.模型和视图变换（Model and View Transform）</code>​<td>模型和视图变换阶段分为模型变换和视图变换。模型变换的目的是将模型从本地空间变换到世界空间当中，而视图变换的目的是将摄像机放置于坐标原点（以使裁剪和投影操作更简单高效），将模型从世界空间变换到相机空间(观察空间)，以便后续步骤的操作<tr><td>​<code class="language-plaintext highlighter-rouge">2.顶点着色（Vertex Shading）</code>​<td>顶点着色阶段的目的在于确定模型上顶点处的光照效果，其输出结果（颜色、向量、纹理坐标等）会被发送到光栅化阶段以进行插值操作<tr><td>​<code class="language-plaintext highlighter-rouge">3.几何、曲面细分着色器</code>​<td>【可选项】分为几何着色器(Geometry Shader)和曲面细分着色器(Tessellation Shader)，主要是对顶点进行增加与删除修改等操作<tr><td>​<code class="language-plaintext highlighter-rouge">4.投影（Projection）</code>​<td>投影阶段分为正交投影与透视投影，将上面的观察空间变换到齐次裁剪空间<tr><td>​<code class="language-plaintext highlighter-rouge">5.裁剪（Clipping）</code>​<td>齐次裁剪空间会通过透视除法变换到归一化的设备坐标NDC中，然后再根据图元在视体的位置分为三种裁剪情况：<br />1.当图元完全位于视体内部，那么它可以直接进行下一个阶段<br />2.当图元完全位于视体外部，则不会进入下一个阶段，直接丢弃<br />3.当图元部分位于视体内部，则需要对位于视体内的图元进行裁剪处理<tr><td>​<code class="language-plaintext highlighter-rouge">6.屏幕映射（Screen Mapping）</code>​<td>屏幕映射阶段的主要目的，是将之前步骤得到的坐标映射到对应的屏幕坐标系上</table></div><h3 id="光栅化阶段rasterizer-stage"><span class="me-2">光栅化阶段（Rasterizer Stage）</span><a href="#光栅化阶段rasterizer-stage" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>阶段<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">7.三角形设定（Triangle Setup）</code>​<td>此阶段主要是将从几何阶段得到的一个个顶点通过计算来得到一个个三角形网格<tr><td>​<code class="language-plaintext highlighter-rouge">8.三角形遍历（Triangle Traversal）</code>​<td>此阶段将进行逐像素遍历检查操作，以检查出该像素是否被上一步得到的三角形所覆盖，这个查找过程被称为三角形遍历<tr><td>​<code class="language-plaintext highlighter-rouge">9.像素着色(Pixel Shading)</code>​<td>对应于ShaderLab中的frag函数，主要目的是定义像素的最终输出颜色<tr><td>​<code class="language-plaintext highlighter-rouge">10.混合（Merging）</code>​<td>主要任务是合成当前储存于缓冲器中的由之前的像素着色阶段产生的片段颜色。此阶段还负责可见性问题（深度测试、模版测试等）的处理</table></div><h3 id="shader-lab"><span class="me-2">Shader Lab</span><a href="#shader-lab" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>阶段<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">1.appdata</code>​<td>将应用程序阶段的内容传递到顶点着色器中<tr><td>​<code class="language-plaintext highlighter-rouge">2.vertex(顶点着色器)</code>​<td>本地空间&gt;(本地到世界空间矩阵)&gt;世界空间&gt;(世界到观察空间矩阵)&gt;观察空间&gt;(投影矩阵)&gt;齐次裁剪空间<tr><td>​<code class="language-plaintext highlighter-rouge">3.透视除法</code>​<td>齐次裁剪空间作透视除法(clip.xyzw/clip.w)，变换到归一化设备坐标NDC<tr><td>​<code class="language-plaintext highlighter-rouge">4.视口变换</code>​<td>从NDC坐标变换到屏幕坐标<tr><td>​<code class="language-plaintext highlighter-rouge">5.fragment(片断着色器)</code>​<td>用从顶点着色器的输出来当输入进行逐片断的颜色计算并输出</table></div><hr /><h2 id="platform-differences平台差异"><span class="me-2">Platform Differences（平台差异）</span><a href="#platform-differences平台差异" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="裁剪空间规范化立方体"><span class="me-2">裁剪空间(规范化立方体)</span><a href="#裁剪空间规范化立方体" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>平台<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">OpenGL</code>​<td>裁剪空间下坐标范围(-1,1)<tr><td>​<code class="language-plaintext highlighter-rouge">DirectX</code>​<td>裁剪空间下坐标范围(1,0)<tr><td>​<code class="language-plaintext highlighter-rouge">UNITY_NEAR_CLIP_VALUE</code>​<td>裁剪空间下的近剪裁值，(DX为1,OpenGL为-1)</table></div><h3 id="reversedz"><span class="me-2">ReversedZ</span><a href="#reversedz" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>类型<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">Reversed direction(反向方向)</code>​<td>DirectX 11、DirectX 12、PS4、Xbox One、Metal这些平台都属于反向方向<br />深度值从近裁剪面到远裁剪面的值为[1 ~ 0]<br />裁剪空间下的Z轴范围为[near,0]<tr><td>​<code class="language-plaintext highlighter-rouge">Traditional direction(传统方向)</code>​<td>除以上反向方向的平台以外都属于传统方向<br />深度值从近裁剪面到远裁剪面的值为[0 ~ 1]<br />裁剪空间下的Z轴范围为：<br />DX平台=[0,far]<br />OpenGL平台=[-near,far]<tr><td>​<code class="language-plaintext highlighter-rouge">UNITY_REVERSED_Z</code>​<td>判断当前平台是否开启ReversedZ<tr><td>​<code class="language-plaintext highlighter-rouge">SystemInfo.usesReversedZBuffer</code>​<td>利用C#判断当前平台是否支持ReversedZ</table></div><hr /><h2 id="computer-shader计算着色器"><span class="me-2">Computer Shader（计算着色器）</span><a href="#computer-shader计算着色器" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="table-wrapper"><table><thead><tr><th>内容<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">SystemInfo.supportsComputeShaders</code>​<td>C#中检测硬件是否支持Computer Shader。OpenGLES 3.1及以上支持Compute Shader<tr><td>​<code class="language-plaintext highlighter-rouge">#pragma kernel CSMain SOME_DEFINE DEFINE_WITH_VALUE=1337</code>​<td>声明执行函数为CSMain，可通过多行声明多个函数。SOME_DEFINE和DEFINE_WITH_VALUE是预定义宏，此项为可选项<tr><td>​<code class="language-plaintext highlighter-rouge">ComputerShader.Dispatch(k,X,Y,Z)</code>​<td>k表示要执行的核函数索引，XYZ表示开启X<em>Y</em>Z个线程组，注意是组(每个组中会有具体的线程)!<tr><td>​<code class="language-plaintext highlighter-rouge">[numthreads(x,y,z)]</code>​<td>每个线程组中的总线程数(x<em>y</em>z)<tr><td>​<code class="language-plaintext highlighter-rouge">SV_GroupID</code>​<td>当前线程所在的线程组ID。[(0,0,0)~(X-1,Y-1,Z-1)]<tr><td>​<code class="language-plaintext highlighter-rouge">SV_GroupThreadID</code>​<td>当前线程在所在线程组内的ID。[(0,0,0)~(x-1,y-1,z-1)]<tr><td>​<code class="language-plaintext highlighter-rouge">SV_DispatchThreadID</code>​<td>当前线程的全局唯一ID。值为线程组*线程数+当前线程，是个三维坐标<tr><td>​<code class="language-plaintext highlighter-rouge">SV_GroupIndex</code>​<td>当前线程在所在线程内的下标，int类型。[0~X<em>Y</em>Z-1]</table></div><hr /><h2 id="glslopengl着色语言"><span class="me-2">GLSL（OpenGL着色语言）</span><a href="#glslopengl着色语言" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="基本类型"><span class="me-2">基本类型</span><a href="#基本类型" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>类型<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">void</code>​<td>空类型，即不返回任何值<tr><td>​<code class="language-plaintext highlighter-rouge">bool</code>​<td>布尔类型，即真或者假，true false<tr><td>​<code class="language-plaintext highlighter-rouge">int</code>​<td>带符号的整数<tr><td>​<code class="language-plaintext highlighter-rouge">float</code>​<td>带符号的浮点数<tr><td>​<code class="language-plaintext highlighter-rouge">vec2,vec3,vec4</code>​<td>n维浮点数向量<tr><td>​<code class="language-plaintext highlighter-rouge">bvec2,bvec3,bvec4</code>​<td>n维布尔向量<tr><td>​<code class="language-plaintext highlighter-rouge">ivec2,ivec3,ivec4</code>​<td>n维向整数向量<tr><td>​<code class="language-plaintext highlighter-rouge">mat2,mat3,mat4</code>​<td>2x2,3x3,4x4浮点数矩阵<tr><td>​<code class="language-plaintext highlighter-rouge">clamp(a,min,max)</code>​<td>将a限制在min和max之间<tr><td>​<code class="language-plaintext highlighter-rouge">sampler2D</code>​<td>2D纹理<tr><td>​<code class="language-plaintext highlighter-rouge">samplerCube</code>​<td>立方体纹理</table></div><hr /><h2 id="other其他语法"><span class="me-2">Other（其他语法）</span><a href="#other其他语法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="内置渲染管线"><span class="me-2">内置渲染管线</span><a href="#内置渲染管线" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>语法<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">CGPROGRAM/ENDCG</code>​<td>cg代码的开始与结束<tr><td>​<code class="language-plaintext highlighter-rouge">CGINCLUDE/ENDCG</code>​<td>通常用于定义多段vert/frag函数，然后这段CG代码会插入到所有Pass的CG中，根据当前Pass的设置来选择加载<tr><td>​<code class="language-plaintext highlighter-rouge">Fallback "name"</code>​<td>备胎，当Shader中没有任何SubShader可执行时，则执行FallBack。默认值为Off，表示没有备胎。示例:FallBack “Diffuse”<tr><td>​<code class="language-plaintext highlighter-rouge">GrabPass</code>​<td>GrabPass{} 抓取当前屏幕存储到_GrabTexture中，每个有此命令的Shader都会每帧执行<br />GrabPass { “TextureName” } 抓取当前屏幕存储到自定义的TextureName中，每帧中只有第一个拥有此命令的Shader执行一次<br />GrabPass也支持Name与Tags</table></div><h3 id="urp渲染管线"><span class="me-2">URP渲染管线</span><a href="#urp渲染管线" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>语法<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">include</code>​<td>​<code class="language-plaintext highlighter-rouge">#include "Packages/com.unity.render-pipelines.core/ShaderLibrary/Color.hlsl"#include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl"#include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Lighting.hlsl"#include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/ShaderGraphFunctions.hlsl"#include "Packages/com.unity.render-pipelines.core/ShaderLibrary/UnityInstancing.hlsl"</code>​<tr><td>​<code class="language-plaintext highlighter-rouge">CBUFFER_START(UnityPerMaterial)/CBUFFER_END</code>​<td>将材质属性面板中的变量定义在这个常量缓冲区中，用于支持SRP Batcher<tr><td>​<code class="language-plaintext highlighter-rouge">HLSLPROGRAM/ENDHLSL</code>​<td>HLSL代码的开始与结束<tr><td>​<code class="language-plaintext highlighter-rouge">HLSLINCLUDE/ENDHLSL</code>​<td>通常用于定义多段vert/frag函数，然后这段CG代码会插入到所有Pass的CG中，根据当前Pass的设置来选择加载<tr><td>​<code class="language-plaintext highlighter-rouge">Fallback "name"</code>​<td>备胎，当Shader中没有任何SubShader可执行时，则执行FallBack。默认值为Off，表示没有备胎。比如URP下默认的紫色报错Shader:Fallback “Hidden/Universal Render Pipeline/FallbackError”</table></div><h3 id="通用语法"><span class="me-2">通用语法</span><a href="#通用语法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>语法<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">LOD</code>​<td>Shader LOD，可利用脚本来控制LOD级别，通常用于不同配置显示不同的SubShader。注意SubShader要从高往低写，要不然会无法生效<tr><td>​<code class="language-plaintext highlighter-rouge">Category{}</code>​<td>定义一组所有SubShader共享的命令，位于SubShader外面<tr><td>​<code class="language-plaintext highlighter-rouge">CustomEditor "name"</code>​<td>自定义材质面板，name为自定义的脚本名称。可利用此功能对材质面板进行个性化自定义<tr><td>​<code class="language-plaintext highlighter-rouge">Name "MyPassName"</code>​<td>给当前Pass指定名称，以便利用UsePass进行调用<tr><td>​<code class="language-plaintext highlighter-rouge">UsePass "Shader/NAME"</code>​<td>调用其它Shader中的Pass，注意Pass的名称要全部大写！Shader的路径也要写全，以便能找到具体是哪个Shader的哪个Pass。另外加了UsePass后，也要注意相应的Properties要自行添加</table></div><hr /><h2 id="substance-painter材质绘制"><span class="me-2">Substance Painter（材质绘制）</span><a href="#substance-painter材质绘制" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="参考网址"><span class="me-2">参考网址</span><a href="#参考网址" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>内容<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">URL</code>​<td>https://substance3d.adobe.com/documentation/spdoc/shader-api-89686018.html</table></div><h3 id="材质参数"><span class="me-2">材质参数</span><a href="#材质参数" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="颜色rgb"><span class="me-2">颜色(RGB)</span><a href="#颜色rgb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c1">//: param custom {"default":[1,0.9568,0.8392],"label":"灯光颜色(RGB)","widget":"color","group":"灯光","description":"tooltip在这里"}</span>
<span class="k">uniform</span> <span class="kt">vec3</span> <span class="n">_LightColor</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">vec4</span> <span class="n">_BaseColor</span><span class="p">;(</span><span class="err">当为</span><span class="mi">4</span><span class="err">维颜色时</span><span class="p">,</span><span class="n">alpha</span><span class="err">会变成滑条</span><span class="p">)</span>
</pre></table></code></div></div><h4 id="整型"><span class="me-2">整型</span><a href="#整型" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c1">//: param custom { "default": 0, "label": "Int","min": 0, "max": 10,"step": 1,"group":"Int" }</span>
<span class="k">uniform</span> <span class="kt">int</span> <span class="n">u_int1</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">ivec2</span> <span class="n">u_int2</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">ivec3</span> <span class="n">u_int3</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">ivec4</span> <span class="n">u_int4</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="浮点值"><span class="me-2">浮点值</span><a href="#浮点值" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c1">//: param custom { "default": 1, "label": "Float", "min": 0, "max": 2,"step": 0.1,"group":"Float" }</span>
<span class="k">uniform</span> <span class="kt">float</span> <span class="n">u_float1</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">vec2</span> <span class="n">u_float2</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">vec3</span> <span class="n">u_float3</span><span class="p">;</span>
<span class="k">uniform</span> <span class="kt">vec4</span> <span class="n">u_float4</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="开关"><span class="me-2">开关</span><a href="#开关" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">//: param custom { "default": false, "label": "Boolean","group":"Toogle" }</span>
<span class="k">uniform</span> <span class="kt">bool</span> <span class="n">u_bool</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="枚举"><span class="me-2">枚举</span><a href="#枚举" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1">//: param custom {</span>
<span class="c1">//:   "default": -1,</span>
<span class="c1">//:   "label": "Combobox",</span>
<span class="c1">//:   "widget": "combobox",</span>
<span class="c1">//:   "values": {</span>
<span class="c1">//:     "Value -1": -1,</span>
<span class="c1">//:     "Value 0": 0,</span>
<span class="c1">//:     "Value 10": 10</span>
<span class="c1">//:   },</span>
<span class="c1">//:   "group":"Enum"</span>
<span class="c1">//: }</span>
<span class="k">uniform</span> <span class="kt">int</span> <span class="n">u_combobox</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="自定义纹理"><span class="me-2">自定义纹理</span><a href="#自定义纹理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">//: param custom { "default": "", "default_color": [1.0, 1.0, 1.0, 1.0], "label": "Texture","usage": "texture","group":"Texture" }</span>
<span class="c1">//: param custom { "default": "", "label": "Texture","usage": "environment","group":"Texture" }</span>
<span class="k">uniform</span> <span class="kt">sampler2D</span> <span class="n">u_sampler1</span><span class="p">;</span>
<span class="kt">vec4</span> <span class="n">tex</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">u_sampler1</span><span class="p">,</span> <span class="n">inputs</span><span class="p">.</span><span class="n">tex_coord</span><span class="p">);</span>
</pre></table></code></div></div><h4 id="内置通道图"><span class="me-2">内置通道图</span><a href="#内置通道图" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c1">//: param auto channel_basecolor</span>
<span class="c1">//: param auto channel_ambientocclusion</span>
<span class="c1">//: param auto channel_anisotropyangle</span>
<span class="c1">//: param auto channel_anisotropylevel</span>
<span class="c1">//: param auto channel_blendingmask</span>
<span class="c1">//: param auto channel_diffuse</span>
<span class="c1">//: param auto channel_displacement</span>
<span class="c1">//: param auto channel_emissive</span>
<span class="c1">//: param auto channel_glossiness</span>
<span class="c1">//: param auto channel_height</span>
<span class="c1">//: param auto channel_ior</span>
<span class="c1">//: param auto channel_metallic</span>
<span class="c1">//: param auto channel_normal</span>
<span class="c1">//: param auto channel_opacity</span>
<span class="c1">//: param auto channel_reflection</span>
<span class="c1">//: param auto channel_roughness</span>
<span class="c1">//: param auto channel_scattering</span>
<span class="c1">//: param auto channel_specular</span>
<span class="c1">//: param auto channel_specularlevel</span>
<span class="c1">//: param auto channel_transmissive</span>
<span class="k">uniform</span> <span class="n">SamplerSparse</span> <span class="n">channel_tex</span><span class="p">;</span>
<span class="kt">vec4</span> <span class="n">tex</span> <span class="o">=</span> <span class="n">textureSparse</span><span class="p">(</span><span class="n">channel_basecolor</span><span class="p">,</span><span class="n">i</span><span class="p">.</span><span class="n">sparse_coord</span><span class="p">);</span>
</pre></table></code></div></div><h4 id="用户自定义通道图"><span class="me-2">用户自定义通道图</span><a href="#用户自定义通道图" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">//: param auto channel_user0</span>
<span class="c1">//: param auto channel_user1</span>
<span class="c1">//: param auto channel_user2</span>
<span class="c1">//: param auto channel_user3</span>
<span class="c1">//: param auto channel_user4</span>
<span class="c1">//: param auto channel_user5</span>
<span class="c1">//: param auto channel_user6</span>
<span class="c1">//: param auto channel_user7</span>
<span class="k">uniform</span> <span class="n">SamplerSparse</span> <span class="n">channel_userTex</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="模型纹理"><span class="me-2">模型纹理</span><a href="#模型纹理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">//: param auto texture_ambientocclusion (AO)</span>
<span class="c1">//: param auto texture_curvature (曲率)</span>
<span class="c1">//: param auto texture_id (ID图)</span>
<span class="c1">//: param auto texture_normal (切线空间下的法线纹理)</span>
<span class="c1">//: param auto texture_normal_ws (世界空间下的法线纹理)</span>
<span class="c1">//: param auto texture_position (世界空间下的位置纹理)</span>
<span class="c1">//: param auto texture_thickness (厚度纹理)</span>
<span class="k">uniform</span> <span class="kt">sampler2D</span> <span class="n">u_meshTexture</span><span class="p">;</span>
</pre></table></code></div></div><h3 id="片断输出"><span class="me-2">片断输出</span><a href="#片断输出" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>输出<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">最终输出(emissiveColorOutput + albedoOutput * diffuseShadingOutput + specularShadingOutput)</code>​<td>​<code class="language-plaintext highlighter-rouge">void alphaOutput(1);diffuseShadingOutput(vec3(0,0,0));specularShadingOutput(vec3(0,0,0));emissiveColorOutput(vec3(0,0,0));albedoOutput(vec3(1,1,1));sssCoefficientsOutput(vec4(0,0,0,0));</code>​</table></div><hr /><h2 id="experience经验总结"><span class="me-2">Experience（经验总结）</span><a href="#experience经验总结" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="table-wrapper"><table><thead><tr><th>经验<th>描述<tbody><tr><td>​<code class="language-plaintext highlighter-rouge">分支</code>​<td>尽量不要使用if或者switch去做大量的分支，否则在部分机型上会卡到怀疑人生!<tr><td>​<code class="language-plaintext highlighter-rouge">Stencil</code>​<td>红米9C上开启深度图同时Shader中启用Stencil时会导致资源显示不可见，关闭任一个即可解决</table></div><hr /><h2 id="miscellaneous杂项技巧"><span class="me-2">Miscellaneous（杂项技巧）</span><a href="#miscellaneous杂项技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="ps中的混合公式ab为图层"><span class="me-2">PS中的混合公式（A、B为图层）</span><a href="#ps中的混合公式ab为图层" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>混合模式<th>公式<tbody><tr><td>正常<td>​<code class="language-plaintext highlighter-rouge">A*(1-B.a)+B*(B.a)</code>​<tr><td>变暗<td>​<code class="language-plaintext highlighter-rouge">min(A,B)</code>​<tr><td>变亮<td>​<code class="language-plaintext highlighter-rouge">max(A,B)</code>​<tr><td>正片叠底<td>​<code class="language-plaintext highlighter-rouge">A*B</code>​<tr><td>滤色<td>​<code class="language-plaintext highlighter-rouge">1-((1-A)*(1-B))</code>​<tr><td>颜色加深<td>​<code class="language-plaintext highlighter-rouge">A-((1-A)*(1-B))/B</code>​<tr><td>颜色减淡<td>​<code class="language-plaintext highlighter-rouge">A+(A*B)/(1-B)</code>​<tr><td>线性加深<td>​<code class="language-plaintext highlighter-rouge">A+B-1</code>​<tr><td>线性减淡<td>​<code class="language-plaintext highlighter-rouge">A+B</code>​<tr><td>叠加<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(A,0.5);half4 c = a*A*B*2+(1-a)*(1-(1-A)*(1-B)*2);</code>​<tr><td>强光<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(B,0.5);half4 c =a*A*B*2+(1-a)*(1-(1-A)*(1-B)*2);</code>​<tr><td>柔光<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(B,0.5);half4 c =a*(A*B*2+A*A*(1-B*2))+(1-a)*(A*(1-B)*2+sqrt(A)*(2*B-1)</code>​<tr><td>亮光<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(B,0.5);half4 c =a*(A-(1-A)*(1-2*B)/(2*B))+(1-a)*(A+A*(2*B-1)/(2*(1-B)));</code>​<tr><td>点光<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(B,0.5);half4 c =a*(min(A,2*B))+(1-a)*(max(A,( B*2-1)));</code>​<tr><td>线性光<td>​<code class="language-plaintext highlighter-rouge">A+2*B-1</code>​<tr><td>排除<td>​<code class="language-plaintext highlighter-rouge">A+B-A*B*2</code>​<tr><td>差值<td>​<code class="language-plaintext highlighter-rouge">abs(A-B)</code>​<tr><td>深色<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(B.r+B.g+B.b,A.r+A.g+A.b);half4 c =a*(B)+(1-a)*(A);</code>​<tr><td>浅色<td>​<code class="language-plaintext highlighter-rouge">half4 a = step(B.r+B.g+B.b,A.r+A.g+A.b);half4 c =a*(A)+(1-a)*(B);</code>​<tr><td>减去<td>​<code class="language-plaintext highlighter-rouge">A-B</code>​<tr><td>划分<td>​<code class="language-plaintext highlighter-rouge">A/B</code>​</table></div><h3 id="uv技巧"><span class="me-2">UV技巧</span><a href="#uv技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>技巧<th>代码<tbody><tr><td>UV重映射到中心位置<td>​<code class="language-plaintext highlighter-rouge">float2 centerUV = uv * 2 - 1</code>​<tr><td>画圆<td>​<code class="language-plaintext highlighter-rouge">float circle = smoothstep(_Radius, (_Radius + _CircleFade), length(uv * 2 - 1));</code>​<tr><td>画矩形<td>​<code class="language-plaintext highlighter-rouge">float2 centerUV = abs(i.uv.xy * 2 - 1);float rectangleX = smoothstep(_Width, (_Width + _RectangleFade), centerUV.x);float rectangleY = smoothstep(_Heigth, (_Heigth + _RectangleFade), centerUV.y);float rectangleClamp = clamp((rectangleX + rectangleY), 0.0, 1.0);</code>​<tr><td>黑白棋盘格<td>​<code class="language-plaintext highlighter-rouge">float2 uv = i.uv * 格子密度;uv = floor(uv) * 0.5;float c = frac(uv.x + uv.y) * 2;return c;</code>​<tr><td>蜂窝格<td>​<code class="language-plaintext highlighter-rouge">float2 uv = i.uv * 格子密度;uv.y += floor(uv.x) * 0.5;uv = fmod(uv,1);uv = uv*2-1;uv = abs(uv);float d = max((uv.x*0.9+uv.y*0.5),uv.y);d = step(d,_Size);return d;</code>​<tr><td>极坐标<td>​<code class="language-plaintext highlighter-rouge">float2 centerUV = (i.uv * 2 - 1);float atan2UV = 1 - abs(atan2(centerUV.g, centerUV.r) / 3.14);</code>​<tr><td>将0-1的值控制在某个自定义的区间内<td>​<code class="language-plaintext highlighter-rouge">frac(x*n+n);</code>​<tr><td>旋转<td>​<code class="language-plaintext highlighter-rouge">fixed t=_Time.y;float2 rot= cos(t)*i.uv+sin(t)*float2(i.uv.y,-i.uv.x);</code>​<tr><td>从中心缩放纹理<td>​<code class="language-plaintext highlighter-rouge">half2 offset = (0.5-i.uv.xy)*_Offset;half4 baseMap = SAMPLE_TEXTURE2D(_MainTex, sampler_MainTex, i.uv.xy + offset);</code>​<tr><td>序列图<td>​<code class="language-plaintext highlighter-rouge">float2 splitUV = uv * (1/_Sequence.xy) + float2(0,_Sequence.y - 1/_Sequence.y);float time = _Time.y * _Sequence.z;uv = splitUV + float2(floor(time *_Sequence.x)/_Sequence.x,1-floor(time)/_Sequence.y);</code>​</table></div><h3 id="顶点技巧"><span class="me-2">顶点技巧</span><a href="#顶点技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>技巧<th>代码<tbody><tr><td>模型中心点坐标<td>​<code class="language-plaintext highlighter-rouge">float3 objCenterPos = mul( unity_ObjectToWorld, float4( 0, 0, 0, 1 ) ).xyz;</code>​<tr><td>获取模型的旋转角度(Y轴)<td>​<code class="language-plaintext highlighter-rouge">float cosA = unity_ObjectToWorld._11;float sinA = unity_ObjectToWorld._13;float angle = atan2(sinA, cosA);angle *= 180 / 3.1415926;if (angle &lt; 0) angle += 360;</code>​<tr><td>BillBoard<td>在顶点着色器中添加相机空间转换代码<tr><td>网格阴影<td>​<code class="language-plaintext highlighter-rouge">half4 worldPos = mul(unity_ObjectToWorld, v.vertex);worldPos.y = 2.47;worldPos.xz += fixed2(阴影X方向,阴影Z方向)*v.vertex.y;o.pos = mul(UNITY_MATRIX_VP,worldPos);</code>​</table></div><h3 id="颜色技巧"><span class="me-2">颜色技巧</span><a href="#颜色技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>技巧<th>代码<tbody><tr><td>去色<td>​<code class="language-plaintext highlighter-rouge">dot(rgb,fixed3(0.22,0.707,0.071))</code>​<tr><td>RGB2HSV<td>使用专门的转换函数<tr><td>HSV2RGB<td>使用专门的转换函数<tr><td>利用HSV对颜色进行调整<td>​<code class="language-plaintext highlighter-rouge">half3 hsv = RGB2HSV(baseMap.rgb);baseMap.rgb = HSV2RGB(float3((hsv.x + _HSVValue.x), (hsv.y * _HSVValue.y), (hsv.z * _HSVValue.z)));</code>​<tr><td>随机(单通道)<td>​<code class="language-plaintext highlighter-rouge">frac(sin(dot(uv, float2(127.1, 311.7))) * 43758.5453);</code>​<tr><td>随机(三通道)<td>​<code class="language-plaintext highlighter-rouge">float3 q = float3(dot(p,float2(127.1,311.7)),dot(p,float2(269.5,183.3)),dot(p,float2(419.2,371.9)));return frac(sin(q)*43758.5453);</code>​</table></div><h3 id="深度技巧"><span class="me-2">深度技巧</span><a href="#深度技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>技巧<th>代码<tbody><tr><td>从深度重建世界坐标<td>​<code class="language-plaintext highlighter-rouge">float2 screenUV = i.positionCS/_ScreenParams.xy;half depthMap = SAMPLE_TEXTURE2D(_CameraDepthTexture, sampler_CameraDepthTexture, screenUV).r;float3 positionWS = ComputeWorldSpacePosition(screenUV, depth, UNITY_MATRIX_I_VP);</code>​</table></div><h3 id="光照技巧"><span class="me-2">光照技巧</span><a href="#光照技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>技巧<th>代码<tbody><tr><td>Matcap<td>​<code class="language-plaintext highlighter-rouge">o.normalWS = TransformObjectToWorldNormal(v.normalOS);o.uv.zw = mul(UNITY_MATRIX_V, float4(o.normalWS, 0.0)).xy * 0.5 + 0.5;</code>​</table></div><h3 id="其他技巧"><span class="me-2">其他技巧</span><a href="#其他技巧" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>技巧<th>代码<tbody><tr><td>菲涅尔<td>​<code class="language-plaintext highlighter-rouge">half3 worldViewDir = normalize (UnityWorldSpaceViewDir (i.worldPos));float ndotv = dot (i.normal, worldViewDir);float fresnel = (0.2 + 2.0 * pow (1.0 - ndotv, 2.0));</code>​<tr><td>XRay射线<td>新建一个Pass，设置Blend，Zwrite Off关闭深度写入，Ztest greater深度测试设置为大于<tr><td>Dither<td>使用专门的Dither函数（2x2、4x4、8x8）</table></div><hr /><h2 id="总结"><span class="me-2">总结</span><a href="#总结" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>这个完整的Unity Shader参考文档涵盖了：</p><ol><li><strong>Semantics（语义）</strong> - 数据传递的关键字<li><strong>Properties（属性）</strong> - 材质面板中的可调参数<li><strong>Math（数学运算）</strong> - 常用的数学函数和运算<li><strong>BuildIn Variables（内置变量）</strong> - Unity提供的内置变量和函数<li><strong>BuildIn Transformation（内置变换）</strong> - 空间变换矩阵和方法<li><strong>Lighting（光照）</strong> - 各种光照模型和实现<li><strong>Tags（标签）</strong> - 渲染管线和队列控制<li><strong>Pragma（编译指令）</strong> - 编译控制和变体管理<li><strong>Render State（渲染状态）</strong> - 渲染状态设置<li><strong>Transformation（空间变换）</strong> - 详细的变换矩阵和方法<li><strong>Predefined Macros（预定义宏）</strong> - Unity预定义的宏<li><strong>Pipeline（渲染管线）</strong> - 渲染管线流程<li><strong>Platform Differences（平台差异）</strong> - 不同平台的差异<li><strong>Computer Shader（计算着色器）</strong> - 计算着色器相关内容<li><strong>GLSL（OpenGL着色语言）</strong> - GLSL语法<li><strong>Other（其他语法）</strong> - 其他shader语法<li><strong>Substance Painter（材质绘制）</strong> - Substance Painter中的shader语法<li><strong>Experience（经验总结）</strong> - 实际开发中的经验<li><strong>Miscellaneous（杂项技巧）</strong> - 实用的shader技巧和算法</ol><p>这个文档可以作为Unity Shader开发的完整参考手册，帮助开发者快速查找和使用各种shader功能。</p></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/shader/" class="post-tag no-text-decoration" >shader</a> <a href="/tags/unity/" class="post-tag no-text-decoration" >unity</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Unity%20Shader%20%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%20-%20%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%20-%20%E6%99%93%E7%9A%84%E5%8D%9A%E5%AE%A2&url=https%3A%2F%2Flixiao90s.github.io%2Fpost%2Funity-shader-reference-document-part-4-z28zd5r.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Unity%20Shader%20%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%20-%20%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%20-%20%E6%99%93%E7%9A%84%E5%8D%9A%E5%AE%A2&u=https%3A%2F%2Flixiao90s.github.io%2Fpost%2Funity-shader-reference-document-part-4-z28zd5r.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Flixiao90s.github.io%2Fpost%2Funity-shader-reference-document-part-4-z28zd5r.html&text=Unity%20Shader%20%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%20-%20%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%20-%20%E6%99%93%E7%9A%84%E5%8D%9A%E5%AE%A2" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="分享链接" data-title-succeed="链接已复制！" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">最近更新</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/post/some-understanding-of-grain-s-official-documentation-zcic9v.html">Grain官方文档的一些理解</a><li class="text-truncate lh-lg"> <a href="/post/orleans-framework-z1wuwgn.html">Orleans框架</a><li class="text-truncate lh-lg"> <a href="/post/unity-shader-reference-document-part-4-z28zd5r.html">Unity Shader 参考文档 - 第四部分</a><li class="text-truncate lh-lg"> <a href="/post/unity-shader-reference-document-part-3-z2bufyb.html">Unity Shader 参考文档 - 第三部分</a><li class="text-truncate lh-lg"> <a href="/post/unity-shader-reference-document-part-2-zv2tg1.html">Unity Shader 参考文档 - 第二部分</a></ul></section><section><h2 class="panel-heading">热门标签</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/shader/">shader</a> <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a> <a class="post-tag btn btn-outline-primary" href="/tags/unity/">unity</a> <a class="post-tag btn btn-outline-primary" href="/tags/framework/">framework</a> <a class="post-tag btn btn-outline-primary" href="/tags/maven/">maven</a> <a class="post-tag btn btn-outline-primary" href="/tags/spring/">spring</a> <a class="post-tag btn btn-outline-primary" href="/tags/tree/">tree</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/mvc/">mvc</a> <a class="post-tag btn btn-outline-primary" href="/tags/mybatis/">mybatis</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">文章内容</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">相关文章</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/post/unity-shader-reference-document-part-3-z2bufyb.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1753924006" data-df="YYYY/MM/DD" > 2025/07/31 </time><h4 class="pt-0 my-2">Unity Shader 参考文档 - 第三部分</h4><div class="text-muted"><p>Pragma（编译指令） 基础编译指令 指令 描述 ​#pragma target 2.0​ Shader编绎目标级别，默认值为2.5• 2.0: 基础功能• 2.5: derivatives• 3.0: 2.5 + interpolators10 + samplelod + fragcoo...</p></div></div></a></article><article class="col"> <a href="/post/unity-shader-reference-document-part-2-zv2tg1.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1753923994" data-df="YYYY/MM/DD" > 2025/07/31 </time><h4 class="pt-0 my-2">Unity Shader 参考文档 - 第二部分</h4><div class="text-muted"><p>BuildIn Variables（内置变量） 基础函数 函数 描述 ​UNITY_INITIALIZE_OUTPUT(type,name)​ 由于HLSL编缉器不接受没有初始化的数据，所以为了支持所有平台，从而需要使用此方法进行初始化 ​TRANSFORM_...</p></div></div></a></article><article class="col"> <a href="/post/unity-shader-reference-documentation-8dcqe.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1753923972" data-df="YYYY/MM/DD" > 2025/07/31 </time><h4 class="pt-0 my-2">Unity Shader 参考文档</h4><div class="text-muted"><p>Semantics（语义） 应用程序到顶点着色器的数据（appdata） 语义 描述 ​float4 vertex : POSITION;​ 顶点的本地坐标 ​uint vid : SV_VertexID;​ 顶点的索引ID ...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/post/unity-shader-reference-document-part-3-z2bufyb.html" class="btn btn-outline-primary" aria-label="上一篇" ><p>Unity Shader 参考文档 - 第三部分</p></a> <a href="/post/orleans-framework-z1wuwgn.html" class="btn btn-outline-primary" aria-label="下一篇" ><p>Orleans框架</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/lixiao90s">晓</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。" >保留部分权利。</span></p><p>本站采用 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 主题 <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">热门标签</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/shader/">shader</a> <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a> <a class="post-tag btn btn-outline-primary" href="/tags/unity/">unity</a> <a class="post-tag btn btn-outline-primary" href="/tags/framework/">framework</a> <a class="post-tag btn btn-outline-primary" href="/tags/maven/">maven</a> <a class="post-tag btn btn-outline-primary" href="/tags/spring/">spring</a> <a class="post-tag btn btn-outline-primary" href="/tags/tree/">tree</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/mvc/">mvc</a> <a class="post-tag btn btn-outline-primary" href="/tags/mybatis/">mybatis</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">发现新版本的内容。</p><button type="button" class="btn btn-primary" aria-label="Update"> 更新 </button></div></aside><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
